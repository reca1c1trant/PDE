# Evaluation Configuration for Pretrained PDE Foundation Model
# Each dataset is evaluated independently with its own physical domain parameters

# Checkpoint to evaluate
checkpoint: "./checkpoints_pretrain_scratch/best.pt"

# Model config (must match training)
model_config: "./configs/pretrain.yaml"

# Evaluation parameters
eval:
  batch_size: 8           # Batch size per GPU
  input_steps: 16         # Number of input timesteps (1-16), model predicts next step
  num_samples: null       # Number of samples to evaluate (null = all validation samples)
  seed: 42                # Random seed for reproducibility
  num_vis_samples: 3      # Number of samples to visualize per dataset
  vis_timestep: -1        # Which timestep to visualize (-1 = last)

# Output directory for visualizations
output_dir: "./eval_results"

# Datasets to evaluate
datasets:
  - name: diffusion_reaction
    path: "./data/pretrained/2D_diff-react_NA_NA.hdf5"
    Lx: 2.0               # Domain: (-1, 1)^2
    Ly: 2.0
    channels:             # Active channel names for visualization
      - concentration_u
      - concentration_v

  - name: 2d_cfd
    path: "./data/pretrained/2D_CFD_128_merged.hdf5"
    Lx: 1.0               # Domain: (0, 1)^2
    Ly: 1.0
    channels:
      - Vx
      - Vy
      - density
      - pressure

  - name: swe
    path: "./data/pretrained/2D_rdb_NA_NA.h5"
    Lx: 5.0               # Domain: (-2.5, 2.5)^2
    Ly: 5.0
    channels:
      - height

  - name: ns_incom
    path: "./data/pretrained/ns_incom_inhom_2d_128_split.hdf5"
    Lx: 1.0               # Domain: (0, 1)^2
    Ly: 1.0
    channels:
      - vx
      - vy
      - passive_tracer
